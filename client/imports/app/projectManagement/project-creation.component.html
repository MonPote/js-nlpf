<home-navbar></home-navbar>
<div *ngIf="!user">Please, log in to change the project</div>

<div class="col-lg-12" *ngIf="user">
    <h1> Mon projet </h1>
    <div class="col-lg-6">
        <div class="panel panel-default">
            <div class="panel-heading">Informations générales</div>
            <div class="panel-body">
                <form class="form-horizontal" [formGroup]="createProjectForm" (ngSubmit)="submitProject()">
                    <div class="form-group">
                        <label class="col-lg-2 control-label">Nom du projet</label>
                        <div class="col-lg-10">
                            <input class="form-control" formControlName="name" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-lg-2 control-label">Description</label>
                        <div class="col-lg-10">
                            <input class="form-control" formControlName="description" pattern=".{140,}" required title="La description doit faire au minimum 140 caractères" >
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-lg-2 control-label">Auteur</label>
                        <div class="col-lg-10">
                            <input class="form-control" formControlName="author" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="col-lg-offset-2 col-lg-10">
                            <button type="submit" class="btn btn-success"> Enregistrer les modifications</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div class="col-lg-6">
        <div class="panel panel-default">
            <div class="panel-heading">Contreparties</div>
            <div class="panel-body">
                <form class="form-horizontal" [formGroup]="compensationsForm" (ngSubmit)="addCompensation()">
                    <div class="form-group">
                        <label class="col-lg-2 control-label">Titre</label>
                        <div class="col-lg-10">
                            <input class="form-control" formControlName="title" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-lg-2 control-label">Valeur (en € / mois)</label>
                        <div class="col-lg-10">
                            <input type="number" class="form-control" formControlName="value" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-lg-2 control-label">Description</label>
                        <div class="col-lg-10">
                            <input class="form-control" pattern=".{140,}" required title="La description doit faire au minimum 140 caractères" formControlName="description">
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="col-lg-offset-2 col-lg-10">
                            <button type="submit" class="btn btn-success">Ajouter une contrepartie</button>
                        </div>
                    </div>
                </form>
                <div *ngFor="let compensation of compensationFormList">
                    <div class="panel panel-default">
                        <div class="panel-heading">{{compensation.title}}</div>
                        <div class="panel-body">
                            <div class="row">
                                <label class="col-lg-2 control-label">Valeur (en € / mois)</label>
                                <div class="col-lg-10"><span>{{compensation.value}}</span></div>
                            </div>
                            <div class="row">
                                <label class="col-lg-2 control-label">Description</label>
                                <div class="col-lg-10"><span>{{compensation.description}}</span></div>
                            </div>
                            <div class="row">
                                <button class="col-lg-offset-8 btn btn-warning" (click)="modifyCompensation(compensation)">Modifier</button>
                                <button class="btn btn-danger" (click)="deleteCompensation(compensation)">Supprimer</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>